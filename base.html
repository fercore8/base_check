<!DOCTYPE html>
<html lang="en">
{% load static %}
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=yes">
    <meta name="description" content="BDV Trading: Your ultimate marketplace for TCG cards, Funko Pop, Board Games and more. Discover, buy, and sell with fellow nerds around the globe.">
    <meta name="robots" content="index, follow">
    <meta name="msvalidate.01" content="B313BEA9E05E4C5518CA4D96517BBD4C" />  <!-- bing -->
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://www.bdvtrading.com/">
    <meta property="og:title" content="BDV Trading: Your Marketplace for TCG Cards, Funko Pop and More">
    <meta property="og:description" content="BDV Trading: Your ultimate marketplace for TCG cards, Funko Pop, and more. Discover, buy, and sell with fellow nerds around the globe.">
    <meta property="og:image" content="{% static 'jesus_icon.png' %}">
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://www.bdvtrading.com/">
    <meta property="twitter:title" content="BDV Trading: Your Marketplace for TCG Cards, Funko Pop and More">
    <meta property="twitter:description" content="BDV Trading: Your ultimate marketplace for TCG cards, Funko Pop, and more. Discover, buy, and sell with fellow nerds around the globe.">
    <meta property="twitter:image" content="{% static 'jesus_icon.png' %}">
    <title>{% block title %}BDV Trading{% endblock %}</title>
    <link rel="canonical" href="https://www.bdvtrading.com/" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
    <script src="https://code.jquery.com/jquery-3.6.3.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
    <script src="https://kit.fontawesome.com/9ea2d8b6c3.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lazysizes/5.3.2/lazysizes.min.js" async=""></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.5.0/css/flag-icon.min.css">
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-EGM8VK13RC"></script>
    <script>
        (function(d){
            var s = d.createElement("script");
            /* uncomment the following line to override default position*/
            s.setAttribute("data-position", 6);
            /* uncomment the following line to override default size (values: small, large)*/
            /* s.setAttribute("data-size", "large");*/

<!--            // Set language to Hebrew-->
<!--            s.setAttribute("data-language", "he");-->

            /* uncomment the following line to override color set via widget (e.g., #053f67)*/
            /* s.setAttribute("data-color", "#2d68ff");*/
            /* uncomment the following line to override type set via widget (1=person, 2=chair, 3=eye, 4=text)*/
            /* s.setAttribute("data-type", "1");*/
            /* s.setAttribute("data-statement_text:", "Our Accessibility Statement");*/
            /* s.setAttribute("data-statement_url", "http://www.example.com/accessibility";*/
            /* uncomment the following line to override support on mobile devices*/
            /* s.setAttribute("data-mobile", true);*/
            /* uncomment the following line to set custom trigger action for accessibility menu*/
            /* s.setAttribute("data-trigger", "triggerId")*/
            s.setAttribute("data-account", "njS4t93Oth");
            s.setAttribute("src", "https://cdn.userway.org/widget.js");
            (d.body || d.head).appendChild(s);
        })(document)
    </script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-EGM8VK13RC');
    </script>
<!--    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8917476178557196"-->
<!--     crossorigin="anonymous"></script>-->
    {% load compress %}
    {% compress css %}
        <link rel="stylesheet" href="{% static 'style.css' %}">
    {% endcompress %}
    <link class="lazyload" rel="icon" type="image/png" href="{% static 'jesus_icon.png' %}"/>
    {% block style %} {% endblock %}
    <style>
    @media (min-width: 768px) {
        .navbar-nav-left {
            flex-grow: 1;
            justify-content: flex-start;
        }
        .navbar-nav-right {
            justify-content: flex-end;
        }
    }
    @media screen and (max-width: 600px) {
        body {
            margin: 0;
            padding: 0;
        }
    }
    #categorySelect:hover, #categorySelect:focus {
        background-color: #30A7A3; /* Soft Teal */
        color: #F5F5F5; /* Off-white */
    }
    .search-icon-btn {
        background-color: transparent;
        border: 1px solid white;
        color: white;
    }
    .search-icon-btn:hover {
        background-color: orange;
        border: 1px solid orange;
        color: black;
    }
    .btn-advanced-search {
        color: white;
        border: 1px solid white;
        background-color: transparent;
    }
    .btn-advanced-search:hover {
        background-color: orange;
        color: black;
    }
    .btn-advanced-search .nav-link {
        color: white;
        display: inline;  /* To make the anchor tag inline with the button */
    }
    .btn-advanced-search:hover .nav-link {
        color: black;
    }
    </style>
</head>

<body class="d-flex flex-column min-vh-100 w-100">
  <header>
    {% load cache %}
    {% cache 120 navbar %}
    <nav class="navbar navbar-expand-md fixed-top navbar-dark bg-dark">
        <div class="container-fluid">
            <div class="d-flex align-items-center justify-content-start">
                <a class="navbar-brand text-warning d-flex align-items-center me-2" href="/">
                    <img src="{% static 'jesus_icon.png' %}" alt="the one and only" width="30px" height="30px" class="d-inline-block ml-2">
                    <span class="d-none d-md-inline">BDV Trading</span> <!-- hidden for mobile using d-none and displayed for md screens with d-md-inline -->
                </a>
                {% endcache %}
            </div>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav me-auto mb-2 mb-md-0 navbar-nav-left">
                    {% load static %}
                    {% comment %}<li class="nav-item d-none d-md-block"> <a class="nav-link" aria-current="page" href="/">Marketplace</a> </li> {% endcomment %}
                    <!-- Categories -->
                    {% if user.is_staff %}
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="categoriesDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            Buy
                        </a>
                        <ul class="dropdown-menu" aria-labelledby="categoriesDropdown">
                            <!-- Magic The Gathering category -->
                            <li class="nav-item dropdown-submenu">
                                <a class="dropdown-item dropdown-toggle" href="#">Magic The Gathering</a>
                                <ul class="dropdown-menu">
                                    {% for set_name in mtg_sets %}
                                    <li><a class="dropdown-item set_link" href="#" data-set-name="{{ set_name|urlencode }}">{{ set_name }}</a></li>
                                    {% endfor %}
                                </ul>
                            </li>
                            <!-- Pokemon category -->
                            <li class="nav-item dropdown-submenu">
                                <a class="dropdown-item dropdown-toggle" href="#">Pokemon</a>
                                <ul class="dropdown-menu">
                                    {% for set_name in pokemon_sets %}
                                    <li><a class="dropdown-item set_link" href="#" data-set-name="{{ set_name|urlencode }}">{{ set_name }}</a></li>
                                    {% endfor %}
                                </ul>
                            </li>
                            <!-- YuGiOh category -->
                            <li class="nav-item dropdown-submenu">
                                <a class="dropdown-item dropdown-toggle" href="#">Yu-Gi-Oh!</a>
                                <ul class="dropdown-menu">
                                    {% for set_name in yugioh_sets %}
                                    <li><a class="dropdown-item set_link" href="#" data-set-name="{{ set_name|urlencode }}">{{ set_name }}</a></li>
                                    {% endfor %}
                                </ul>
                            </li>
                        </ul>
                    </li>
                    {% endif %}
                    <li class="nav-item"><a class="nav-link" href="/articles">Articles</a></li>
                    {% if not user.is_authenticated %}
                    <li class="nav-item me-1 mb-1">
                        <a class="nav-link inline-block me-2" href="/subscribe">Sign Up</a>
                        <a class="nav-link inline-block" href="{% url 'password_reset' %}" style="font-size:0.8rem;">Forgot Password?</a>
                    </li>
                    <li class="nav-item">
                        <form id="login-form" class="d-flex my-2" method="POST" action="{% url 'login' %}">
                            {% csrf_token %}
                            <input type="text" class="form-control form-control me-1" name="username" placeholder="Username or Email..." required>
                            <input type="password" class="form-control form-control me-1" name="password" placeholder="Password..." required>
                            <button class="btn btn-outline-success btn me-1" type="submit">Login</button>
                        </form>
                    </li>
                    {% endif %}
                    {% if user.is_authenticated %}
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle d-flex align-items-center" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                                <div id="dynamic-navbar-content" class="nav-item d-flex align-items-center">
                                    <i class="fas fa-user-circle me-2"></i>Hi {{ user.username }}!
                                </div>
                            </a>
                            <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                                <li><a class="dropdown-item" href="{% url 'customer_area' %}">Account</a></li>
                                <li><a class="dropdown-item" href="/store/{{ user.username }}">My Store</a></li>
                                <li><a class="dropdown-item" href="{% url 'orders' %}">Orders</a></li>
                                {% if user.user_profiles.first.account_verified %}
                                    <li><a class="dropdown-item" href="{% url 'edit_items' %}">Edit items</a></li>
                                {% endif %}
                                <li><a class="dropdown-item" href="{% url 'view_messages' %}">Messages</a></li>
                            </ul>
                        </li>
                        {% if user.user_profiles.first.account_verified %}
                            <li class="nav-item"> <a class="nav-link" href="{% url 'add_site_item' %}">Sell Items</a> </li>
                        {% else %}
                            <li class="nav-item"> <a class="nav-link" href="/subscribe">Register to Sell Items</a> </li>
                        {% endif %}
                            <li class="nav-item"><a href="{% url 'add_buyer_offer' %}" class="nav-link">Make Offer</a></li>
                            <li class="nav-item"><a class="nav-link" href="/logout">Logout</a></li>
                        {% if user.is_staff %}
                            <li class="nav-item"> <a class="nav-link" href="/buy-cards">Buy Cards</a> </li>
                            <li class="nav-item"> <a class="nav-link" href="/custom_admin/messages">A. messages</a> </li>
                            <li class="nav-item"> <a class="nav-link" href="/article/new">Create Article</a> </li>
                        {% endif %}
                    {% endif %}
                </ul>
                <ul class="navbar-nav navbar-nav-right">
                    <li class="nav-item d-flex align-items-center justify-content-center">
                        <form class="search-form form-inline my-2 my-md-0 d-flex" accept-charset="UTF-8" method="get" role="search" action="{% url 'search_game_item' %}">
                            <div class="custom-select2">
                                <select id="categorySelect" name="category" class="form-control bg-dark text-warning" style="width: 100%;">
                                    <option value="all" selected="selected">All</option>
                                    <option value="Magic the Gathering">MTG</option>
                                    <option value="Pokemon">Pokemon</option>
                                    <option value="Yu-Gi-Oh!">Yu-Gi-Oh!</option>
                                    <option value="Board Games">Board Games</option>
                                    <option value="Dungeons & Dragons">D&D</option>
                                    <option value="Accessories">Accessories</option>
                                    <option value="Sealed Products">Sealed</option>
                                    <option value="Funko Pop">Funko Pop</option>
                                    <option value="One Piece">One Piece</option>
                                    <option value="Video Games & Consoles">VG & Consoles</option>
                                    <option value="Digimon">Digimon</option>
                                    <option value="Dragon Ball">Dragon Ball</option>
                                    <option value="Other">Other</option>
                                </select>
                            </div>
                            <div class="custom-select2">
                                <select id="searchInputSelect" name="q" class="form-control" style="width: 100%;">
                                    <option value="" selected="selected"></option>
                                </select>
                            </div>
                            <button class="btn search-icon-btn me-2" type="submit">
                                <i class="fas fa-search"></i>
                            </button>
                        </form>
                    </li>
                    <li class="my-2 my-md-0">
                        <button class="btn btn-advanced-search">
                            <a class="text-white text-decoration-none m-1" href="{% url 'advanced_search' %}">Advanced Search</a>
                        </button>
                    </li>
                </ul>
            </div>
        </div>
        {% if user.is_authenticated %}
            <div class="d-none d-md-flex bg-dark align-items-center">
                <a class="nav-link text-white me-2">
                    <i class="fas fa-bell"></i>
                    <span class="badge bg-secondary">{{ notifications.count }}</span>
                </a>
            </div>
            <a href="/cart" class="nav-link text-white">
                <i class="fas fa-shopping-cart"></i>
                <span class="badge bg-secondary" id="cart-count">{{ request.session.cart_count|default:0 }}</span>
                <span class="badge bg-secondary" id="cart-total">${{ request.session.cart_total|default:'0.00' }}</span>
            </a>
            <form action="{% url 'set_currency' %}" method="post" id="currencyForm" data-url="{% url 'set_currency' %}">
                {% csrf_token %}
                <select id="currencySelector" name="currencySelector">
                    {% for code, name in user.user_profiles.first.PREFERRED_CURRENCIES %}
                        <option value="{{ code }}" {% if user.user_profiles.first.preferred_currency == code %}selected{% endif %}>{{ code }}</option>
                    {% endfor %}
                </select>
            </form>

        {% endif %}
    </nav>
  </header>
  <div class="content-container flex-column min-vh-100">
    <main class="cd-main-content cd-main-content-with-submenu d-flex flex-column min-vh-10 pt-5 mt-1 mx-auto bg-light">
        <div class="toast-container position-fixed bottom-0 end-0 p-3" style="z-index: 1100;">
          <div id="cart-toast" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
            <div class="toast-header">
              <strong class="me-auto">Success</strong>
              <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
            </div>
            <div class="toast-body bg-dark text-warning">
              Item added to cart.
            </div>
          </div>
        </div>
        <div class="content-container flex-column min-vh-100">
            <div class="col-md-12" id="content">
              {% block content %} {% endblock %}
            </div>
        </div>
    </main>
    <footer class="bg-dark text-center text-white always-at-the-bottom mt-auto">
        <div class="text-center bg-dark p-3" style="background-color: rgba(0, 0, 0, 0.2);">
            <div class="row justify-content-center flex-column flex-md-row align-items-center">
                <div class="col-12 col-md-auto mb-2 mb-md-0 text-center text-md-start">
                    <a class="text-white text-decoration-none m-1" href="/">© 2023 Copyright - www.bdvtrading.com</a>
                    <a class="btn btn-outline-light btn-floating m-1 border-0" href="/terms-and-conditions"><i class="fas fa-file-alt"></i> Terms and Conditions</a>
                    <a class="btn btn-outline-light btn-floating m-1 border-0" href="/privacy-policy"><i class="fas fa-shield-alt"></i> Privacy Policy</a>
                    <a class="btn btn-outline-light btn-floating m-1 border-0" href="{% url 'faq_view' %}"><i class="fas fa-question-circle"></i> FAQs</a>
                    {% if user.is_authenticated %}
                        <a class="btn btn-outline-light btn-floating m-1 border-0" href="{% url 'contact_admin' %}"><i class="fas fa-envelope"></i> Contact Support</a>
                    {% endif %}
                    <!-- Section: Social media -->
                    <!-- Facebook -->
                    <a class="btn btn-outline-light btn-floating m-1 border-0" href="https://www.facebook.com/BDVTrading" role="button"><i class="fab fa-facebook-f"></i></a>
                    <!-- Twitter -->
                    <a class="btn btn-outline-light btn-floating m-1 border-0" href="https://twitter.com/BDVTrading" role="button"><i class="fab fa-twitter"></i></a>
                    <!-- Instagram -->
                    <a class="btn btn-outline-light btn-floating m-1 border-0" href="https://www.instagram.com/BDVTrading" role="button"><i class="fab fa-instagram"></i></a>
                </div>
            </div>
        </div>
    </footer>
  </div>
{{ block.super }}
<script>
    var get_card_names_url = "{% url 'get_card_names' %}";
    function csrfSafeMethod(method) {
        // these HTTP methods do not require CSRF protection
        return (/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));
    }

    function getCookie(name) {
        let cookieValue = null;
        if (document.cookie && document.cookie !== '') {
            let cookies = document.cookie.split(';');
            for (let i = 0; i < cookies.length; i++) {
                let cookie = jQuery.trim(cookies[i]);
                // Does this cookie string begin with the name we want?
                if (cookie.substring(0, name.length + 1) === (name + '=')) {
                    cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                    break;
                }
            }
        }
        return cookieValue;
    }

    $.ajaxSetup({
        beforeSend: function(xhr, settings) {
            if (!csrfSafeMethod(settings.type) && !this.crossDomain) {
                xhr.setRequestHeader("X-CSRFToken", getCookie('csrftoken'));
            }
        }
    });

    document.getElementById('currencySelector').addEventListener('change', function() {
        let form = document.getElementById('currencyForm');
        let url = form.getAttribute('data-url');
        let formData = new FormData(form);

        fetch(url, {
            method: 'POST',
            body: formData,
            headers: {
                'X-Requested-With': 'XMLHttpRequest'  // For Django to treat this as AJAX
            }
        })
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                location.reload();  // Reload the current page to reflect the currency change
            } else {
                alert('Error updating currency. Please try again.');
            }
        });
    });

</script>
{% compress js %}
    <script type="text/javascript" src="{% static 'js/scripts.js' %}"></script>
{% endcompress %}
{% block extra_js %}

{% endblock extra_js %}

</body>
</html>

